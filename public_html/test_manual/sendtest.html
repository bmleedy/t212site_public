<script>

// This is a CLI manual test script for sending a test email.
// Calls the sendmail.php to send a test email to bmleedy@gmail.com
// This is a manual test script, not intended for production use

// run this file via local browser with: http://127.0.0.1/test_manual/sendtest.html

</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<button id="sendTestBtn">Send Test Email</button>
<div id="resultBox" style="margin-top:20px;"></div>

<script>
document.getElementById('sendTestBtn').onclick = function() {
    var fieldData = {
        "sendTo" : "scout parents",
        "user_id" : 464,
        "from" : "donotreply@t212.org",
        "fromName": "Test reminder email from Troop 212",
        "subject" : "This is a test as if Evan signed up for a Troop 212 Event",
        "message" : "Evan  has signed up for a FAKE outing. You can approve and pay (if applicable) by clicking the link below. Thanks!",
        "link" : "troop212test.com"
    };
    document.getElementById('resultBox').innerHTML = 'Sending...';
    $.ajax({
        url: "../api/sendmail.php",
        type: "post",
        data: fieldData,
        datatype: 'json',
        error: function(xhr, status, error) {
            document.getElementById('resultBox').innerHTML = '<span style="color:red">Error: ' + error + '</span>';
            console.log(xhr, status, error);
        },
        success: function(data){
            document.getElementById('resultBox').innerHTML = '<span style="color:green">Success! Response: ' + JSON.stringify(data) + '</span>';
            console.log(data);
        }
    });
};
</script>

